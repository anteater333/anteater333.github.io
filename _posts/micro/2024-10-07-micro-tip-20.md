---
layout: post
title: "ìì˜í•œ ë„ì›€ë§ #20 Next.js SSGì—ì„œ ì‹œìŠ¤í…œ ë‹¤í¬ ëª¨ë“œ ì„¤ì • ê°€ì ¸ì˜¤ê¸°"
subtitle: ""
description: ""
date: 2024-10-07 21:55:00 +0900
category: micro

id: 20
slug: system-dark-mode-in-next-js-ssg
tags: [ğŸ’¡, Front-end, React, Next.js, Web Browser]

# coverImage: "/assets/blog/coverImages/micro-20.png"

# ogImage:
#   url: "/assets/blog/coverImages/micro-20.png"
---

## TL;DR

## ì´í•˜ ê·¸ë¦¬ ì¤‘ìš”í•˜ì§„ ì•Šì€ ë‚´ìš©ë“¤

### ë¸”ë¡œê·¸ ì¬ê±´ì¶•

<p class="center w-3-quarter">
<img src="https://i.postimg.cc/Y9pPpccZ/image.webp" alt="ì •ìƒì˜ì—…í•©ë‹ˆë‹¤" />
</p>

ì•½ 2ë‹¬ ì „, ì›Œë‚™ ë°©ë¬¸ì ìˆ˜ê°€ ì ì€ ë¸”ë¡œê·¸ë¼ì„œ ì•„ë¬´ë„ ì•Œì•„ì°¨ë¦¬ì§€ ëª»í–ˆì„ í…Œì§€ë§Œ, <a target="_blank" class="a-not-colored" href="/meta/2/welcome-to-next">ê¸°ì¡´ Jekyllë¡œ êµ¬ì¶•í–ˆë˜ ë¸”ë¡œê·¸ë¥¼ Next.jsì™€ React ê¸°ë°˜ìœ¼ë¡œ ë¦¬ëª¨ë¸ë§í–ˆë‹¤</a>. ì†ìˆ˜ ë””ìì¸ê¹Œì§€ í•˜ëŠ” ë“± ë°‘ë°”ë‹¥ë¶€í„° ìƒˆë¡œ ë§Œë“ ë‹¤ê³  ê³ ìƒ ê¹¨ë‚˜ í–ˆë‹¤. ì™¸ê´€ë„ ì‹ ìƒ, ì†ŒìŠ¤ ì½”ë“œë„ ì‹ ìƒ. ì•„ì£¼ ë”°ëˆë”°ëˆí•œ ë¸”ë¡œê·¸ê°€ ë˜ì—ˆë‹¤. <i>"ì´ê²Œ ê°ˆì•„ì—ì€ ê±°ë¼ê³ ?"</i> ë¼ëŠ” ìƒê°ì€ ë’¤ë¡œ ë„£ì–´ë‘ì‹œê³ , ì´ë²ˆ ê¸€ì—ì„  ìƒˆ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ë©° ê²ªì—ˆë˜ ì–´ë ¤ì› ë˜ ì ê³¼ í•¨ê»˜ <a target="_blank" href="/category/micro">ìì˜í•œ ë„ì›€ë§</a> ì¹´í…Œê³ ë¦¬ì˜ 20íšŒë¥¼ ì¶•í•˜í•˜ëŠ” ì˜ë¯¸ë¡œ ìƒˆ ê¸°ëŠ¥ë“¤ì— ëŒ€í•´ì„œë„ ì†Œê°œí•˜ê³ ì í•œë‹¤.

### íŒ¨ì¹˜ ë…¸íŠ¸

- ê²Œì‹œê¸€ URLì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.

- ì˜ˆìƒ ì™„ë… ì‹œê°„ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.

- íƒœê·¸ ì‹œìŠ¤í…œì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.

- Buy Me A Coffee ë²„íŠ¼ì´ ë” í™”ë ¤í•´ì¡ŒìŠµë‹ˆë‹¤.

- ê¸°ë³¸ ëª¨ë“œì™€ ë‹¤í¬ ëª¨ë“œ, ë‘ ê°€ì§€ í…Œë§ˆë¥¼ ì§€ì›í•©ë‹ˆë‹¤.

### ì‹œìŠ¤í…œ ë‹¤í¬ëª¨ë“œ ì„¤ì • ê°€ì ¸ì˜¤ê¸°

### í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ì•ˆì— ì„œë²„ ì»´í¬ë„ŒíŠ¸ê°€ ë“¤ì–´ê°€ëŠ” ìƒí™©?

## ë‚´ê°€ ë°°ìš´ ê²ƒ

----

- ì£¼ì œë¥¼ ì–´ë””ì— ì¤‘ì ì„ ë‘˜ ê²ƒì¸ê°€
  - ë‹¤í¬ëª¨ë“œ ì„¤ì •í•˜ëŠ” ë°©ë²•?
  - SSG ê°œë°œ ì‹œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë¬¸ì œì ?
  - ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© ë³€ì²œì‚¬?
- ì¼ë‹¨ ì£¼ì œëŠ” Nextjs SSGì— ì´ˆì ì„ ë‘¡ì‹œë‹¤.
  - ê¸°ì¡´ ë¸”ë¡œê·¸ë¥¼ ë°”ê¾¼ ì´ìœ 
  - ì™œ Nextjsì¸ê°€
  - ì™œ SSGì¸ê°€
  - SSGë¡œ ê°œë°œí•˜ë©´ì„œ ê³¨ì¹˜ì•„íŒ ë˜ ë¬¸ì œ
    - ë¹Œë“œì‹œì  ìƒíƒœì™€ í´ë¼ì´ì–¸íŠ¸ì˜ ìƒíƒœê°€ ë‹¤ë¥¸ í˜„ìƒ
      - ì´ê²Œ ì™œ ë¬¸ì œê°€ ë˜ëŠ”ê°€? ë„ ì¡°ì‚¬í•  ê²ƒ.

- í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹œìŠ¤í…œ ë‹¤í¬ëª¨ë“œ ì„¤ì •ì„ ê°€ì ¸ì™€ í˜ì´ì§€ì— ë¨¼ì € ì ìš©í•˜ê³  ì‹¶ì€ë°
  - useStoreë“±ì˜ ê¸°ëŠ¥ì€ hookìœ¼ë¡œ, í´ë¼ì´ì–¸íŠ¸ì‚¬ì´ë“œ ê¸°ëŠ¥
  - registry ëª¨ë“ˆì„ í†µí•´ í˜ì´ì§€ ë¡œë“œ ì‹œì˜ ì´ˆê¸° ì„¸íŒ…ì„ ì„¤ì •í•œë‹¤.
  - ê·¼ë° ê·¸ëŸ¼ ê²°êµ­ registryë“¤ì€ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë“¤?
  - í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ì•ˆì— ì„œë²„ ì»´í¬ë„ŒíŠ¸ê°€ ë“¤ì–´ê°€ëŠ” êµ¬ì¡°ê°€ ê´œì°®ì€ê°€ìš”?
  - https://www.inflearn.com/community/questions/1118233/%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%9E%90%EC%8B%9D%EC%9C%BC%EB%A1%9C-%EC%84%9C%EB%B2%84-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8%EB%A5%BC-%EB%84%A3%EC%97%88%EC%9D%84-%EB%95%8C%EC%9D%98-%EC%9B%90%EB%A6%AC%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C-%EC%A7%88%EB%AC%B8%EC%9E%88%EC%8A%B5%EB%8B%88%EB%8B%A4?srsltid=AfmBOoq8paJs7TAe8CSepB6O-JT8JN7TCWH3Bk9xs4guynaFqMEEAOsn
  - When a new request is made to the server, all Server Components are rendered first, including those nested inside Client Components.
    - https://nextjs.org/docs/app/building-your-application/rendering/composition-patterns


- ì‹¤ì œ ì‚¬ìš© ì½”ë“œ

```javascript
import { useEffect } from "react";
import { create } from "zustand";

type Store = {
  isDarkMode: boolean;
  toggleDark: () => void;
  setIsDarkMode: (isDarkMode: boolean) => void;
};

const useStore = create<Store>()((set) => {
  return {
    isDarkMode: false,
    toggleDark: () => set((state) => ({ isDarkMode: !state.isDarkMode })),
    setIsDarkMode: (isDarkMode) => set((state) => ({ isDarkMode })),
  };
});

export const useDarkMode = () => {
  const { isDarkMode, toggleDark, setIsDarkMode } = useStore();

  // useStoreì—ì„œ ë°”ë¡œ window ê°ì²´ì˜ ì¡´ì¬ ì—¬ë¶€ë¥¼ íŒŒì•…í•˜ë©° isDarkModeë¥¼ ê²°ì •ì§€ì„ ê²½ìš°
  // ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§ê³¼ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë Œë”ë§ì˜ ì´ˆê¸° ìƒíƒœ ì°¨ì´ë¡œ ì¸í•´ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚´
  // ë¨¼ì € ìƒíƒœ ìƒì„± í›„ -> useEffect í›…ìœ¼ë¡œ ì‹œìŠ¤í…œ ì„¤ì •ì„ í™•ì¸
  useEffect(() => {
    const mediaQueryList = window.matchMedia("(prefers-color-scheme: dark)");
    const updateDarkMode = (e: MediaQueryListEvent) => {
      setIsDarkMode(e.matches);
    };

    // ì´ˆê¸° ìƒíƒœ ì„¤ì •
    setIsDarkMode(mediaQueryList.matches);

    // ë¦¬ìŠ¤ë„ˆ ë“±ë¡
    mediaQueryList.addEventListener("change", updateDarkMode);

    // ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ë¦¬ìŠ¤ë„ˆ ì œê±°
    return () => {
      mediaQueryList.removeEventListener("change", updateDarkMode);
    };
  }, []);

  return { isDarkMode, toggleDark };
};

export default useStore;
```