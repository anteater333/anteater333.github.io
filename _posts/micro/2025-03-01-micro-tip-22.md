---
layout: post
title: "ìì˜í•œ ë„ì›€ë§ #22 Next.jsì—ì„œ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ì˜ ê´´ë¦¬ê° ì²˜ë¦¬í•˜ê¸°"
subtitle: "Hydration Mismatch"
description: ""
date: 2025-03-17 08:40:00 +0900
category: micro

id: 22
slug: hydration-mismatch
tags: [ğŸ’¡, Front-end, Next.js]

coverImage: "/assets/blog/coverImages/micro-21.png"

ogImage:
  url: "/assets/blog/coverImages/micro-21.png"
---

- Hydration Mismatch
    - Next.js ì‚¬ìš© ì‹œ ë¬¸ì œ
    - ëŒ€í‘œì ìœ¼ë¡œ new Date()
    - https://blog.hwahae.co.kr/all/tech/13604
    - ë¬´ì‹œí•  ìˆ˜ ìˆëŠ” hydration mismatch new Date
    - ë¬´ì‹œí•  ìˆ˜ ì—†ëŠ” hydration mismatch í…Œë§ˆ (store ì´ˆê¸° ì„¤ì •ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ëœ í…Œë§ˆ ê°€ì ¸ì˜¤ëŠ” ì½”ë“œì—ì„œ ë°œìƒí•œ ë¬¸ì œ, 83ec7fb67b21fb3ebf32ec49e6c1a60ba66f6b67 ì»¤ë°‹ ì°¸ê³ ) -> ì´ê±´ ë³´ë¥˜
- `suppressHydrationWarning` í•œ ì¤„ ì¶”ê°€ë¡œ í•´ê²° ê°€ëŠ¥í•˜ë‹¤. (í•˜ì§€ë§Œ ì´ê±´ ì—ëŸ¬ë¥¼ ë¬´ì‹œí•˜ëŠ” ë°©ë²•?)
- í´ë¼ì´ì–¸íŠ¸ì—ì„œë§Œ ê²°ê³¼ê°€ ë‚˜ì˜¤ë„ë¡ ë§Œë“ ë‹¤? (í›…ì„ ì‚¬ìš©í•´ì„œ)
- í•˜ì´ë“œë ˆì´ì…˜ì´ë€?? -> Hack the termsë¡œ ê°€ë ¤ë‹¤ê°€ ê·¸ëƒ¥ ì—¬ê¸°ì„œ ë‹¤ë¤„ë³´ë©´ ì¢‹ì„ ê²ƒ ê°™ìŒ

- ì„œë²„ì— ìˆëŠ” ë Œë”ë§ëœ ê²°ê³¼ vs í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë Œë”ë§ëœ ê²°ê³¼ê°€ ì„œë¡œ ë‹¬ë¼ì„œ ìƒê¸°ëŠ” ë¬¸ì œ

- ì™œ ë¬¸ì œê°€ ë˜ëŠ”ê°€?? (by copilot)  

```
Hydration mismatchëŠ” ì„œë²„ì—ì„œ ë Œë”ë§ëœ HTMLê³¼ í´ë¼ì´ì–¸íŠ¸ì—ì„œ Reactê°€ ì´ˆê¸°í™”ë  ë•Œ ìƒì„±ëœ HTMLì´ ì¼ì¹˜í•˜ì§€ ì•Šì„ ë•Œ ë°œìƒí•©ë‹ˆë‹¤. ì´ëŠ” ì—¬ëŸ¬ ê°€ì§€ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

ì‚¬ìš©ì ê²½í—˜ ë¬¸ì œ:

ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ë¡œë“œí•  ë•Œ ê¹œë¹¡ì„ì´ë‚˜ ë ˆì´ì•„ì›ƒì´ ê°‘ìê¸° ë³€ê²½ë˜ëŠ” í˜„ìƒì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì‚¬ìš©ì ê²½í—˜ì„ ì €í•˜ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
SEO ë¬¸ì œ:

ì„œë²„ì—ì„œ ë Œë”ë§ëœ HTMLì´ ê²€ìƒ‰ ì—”ì§„ì— ì˜í•´ ì¸ë±ì‹±ë˜ê¸° ë•Œë¬¸ì—, í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ë‹¤ë¥¸ HTMLì´ ë Œë”ë§ë˜ë©´ ê²€ìƒ‰ ì—”ì§„ì´ ì˜ëª»ëœ ì •ë³´ë¥¼ ì¸ë±ì‹±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë””ë²„ê¹… ì–´ë ¤ì›€:

Hydration mismatchëŠ” ë””ë²„ê¹…í•˜ê¸° ì–´ë ¤ìš´ ë¬¸ì œ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ì˜ ìƒíƒœê°€ ë‹¤ë¥¼ ë•Œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë¬¸ì œë¥¼ ì¶”ì í•˜ê³  í•´ê²°í•˜ëŠ” ë° ë§ì€ ì‹œê°„ì´ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì„±ëŠ¥ ë¬¸ì œ:

Hydration mismatchê°€ ë°œìƒí•˜ë©´ ReactëŠ” í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ì „ì²´ DOMì„ ë‹¤ì‹œ ë Œë”ë§í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì„±ëŠ¥ ì €í•˜ë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë™ì¼í•œ ìƒíƒœì™€ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¼ê´€ëœ HTMLì„ ìƒì„±í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ë Œë”ë§í•  ë•Œì™€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë™ì¼í•œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë Œë”ë§í•  ë•Œ ì¼ê´€ì„±ì„ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤.

ë‹¤ìŒì€ Hydration mismatchë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•œ ëª‡ ê°€ì§€ íŒì…ë‹ˆë‹¤:

ë™ì¼í•œ ë°ì´í„° ì†ŒìŠ¤ ì‚¬ìš©:

ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ëª¨ë‘ ë™ì¼í•œ ë°ì´í„° ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë Œë”ë§í•©ë‹ˆë‹¤.
ì¡°ê±´ë¶€ ë Œë”ë§ ìµœì†Œí™”:

ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì¡°ê±´ë¶€ ë Œë”ë§ì„ ìµœì†Œí™”í•˜ì—¬ ì¼ê´€ëœ HTMLì„ ìƒì„±í•©ë‹ˆë‹¤.
ë™ì¼í•œ ìƒíƒœ ê´€ë¦¬:

ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë™ì¼í•œ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒíƒœë¥¼ ì¼ê´€ë˜ê²Œ ìœ ì§€í•©ë‹ˆë‹¤.
í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©:

ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë™ì¼í•œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¼ê´€ëœ ì„¤ì •ì„ ìœ ì§€í•©ë‹ˆë‹¤.
ì´ëŸ¬í•œ ë°©ë²•ì„ í†µí•´ Hydration mismatch ë¬¸ì œë¥¼ ë°©ì§€í•˜ê³ , ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì¼ê´€ëœ HTMLì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```


https://nextjs.org/docs/messages/react-hydration-error

- A server/client branch `if (typeof window !== 'undefined')`.
- Variable input such as `Date.now()` or `Math.random()` which changes each time it's called.
- Date formatting in a user's locale which doesn't match the server.
- External changing data without sending a snapshot of it along with the HTML.
- Invalid HTML tag nesting.

- ê·¼ë° ì™œ SSGì—ì„œ ì´ëŸ° ì—ëŸ¬ê°€ ë–´ì„ê¹Œ? (ë¹Œë“œ í›„ì—ë„ ì½˜ì†”ì— ì¶œë ¥ë˜ëŠ” ì—ëŸ¬ Minified React error #418)



```tsx
import { format } from "date-fns";

type Props = {
  dateString: string;
};

const DateFormatter = ({ dateString }: Props) => {
  // Safariì˜ parsing ì•Œê³ ë¦¬ì¦˜ì´ ìœ ë… ì €ì—´í•˜ê¸° ë•Œë¬¸ì— ì „ì²˜ë¦¬
  const date = new Date(
    Date.parse(dateString.replace(" ", "T").replace(" ", ""))
  );

  return (
    <time dateTime={dateString} suppressHydrationWarning>
      {format(date, "LLLL	d, yyyy")}
    </time>
  );
};

export default DateFormatter;
```

## TL;DR

## ì´í•˜ ê·¸ë¦¬ ì¤‘ìš”í•˜ì§„ ì•Šì€ ë‚´ìš©ë“¤

## ë‚´ê°€ ë°°ìš´ ê²ƒ
