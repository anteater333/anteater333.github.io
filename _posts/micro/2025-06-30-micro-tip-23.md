---
layout: post
title: "자잘한 도움말 #23 IOS 모바일 웹에서 딥 링크 흘리기"
subtitle: "딥 링크에 대해 가볍게 알아보자"
description: ""
date: 2025-06-15 07:12:00 +0900
category: micro

id: 23
slug: parrying-deep-link
tags: [💡, Front-end]

coverImage: "/assets/blog/coverImages/micro-23.png"

ogImage:
  url: "/assets/blog/coverImages/micro-23.png"
---

## TL;DR

https://soop-global.atlassian.net/wiki/spaces/FE1/pages/159613017/m.sooplive.co.kr+-

이거 참고할것

## 이하 그리 중요하진 않은 내용들

<p class="center rounded-edge-16">
  <img src="https://i.postimg.cc/N07f901w/deeplink.webp" alt="철찌식설명"/>
  <br/>
  오타쿠식 강제연결
</p>

철권의 등장인물 알리사 보스코노비치는 설정상 로봇으로서, 그 컨셉 따라 대부분의 기술명이 IT 용어로 이루어져 있다. 그중 앉으면서 상대방의 다리를 툭 치는 기술 "딥 링크(1LK)". 2008년 첫 등장부터 특유의 상대하기 짜증 나는 성능 덕분에 딥 링크는 알리사의 상징적인 기술 중 하나로 철권 유저들 사이에 악명을 떨치고 있다. 그런데 이 게임뿐만이 아니라 현실 속 딥 링크 또한 프론트엔드 개발자의 짜증을 유발하기도 한다. 딥 링크란 무엇일까? 딥 링크는 어떤 까다로운 동작을 유발할까? 그것을 어떻게 회피해야 할까?


### 모바일 퍼스트

스마트폰은 인간의 새로운 장기가 되어가고 있다. 극단적인 사례로서 <a href="https://www.musinsa.com/">무신사</a>는 한때 PC 웹 서비스를 종료하고 모바일 웹 형태로만 서비스를 제공했던 바가 있다. 비록 10개월 만에 다시 돌아오긴 했으나, 이는 기업들이 생각하는 PC와 모바일 간의 중요도 저울이 한쪽으로 크게 기울고 있단 증거 중 하나일 것이다. 국내 스마트폰 사용자는 한국 전체 인구의 95%에 해당한다고 한다. 그 거대한 스마트폰 사용자의 파이를 먹기 위해 각종 웹 기반 서비스들은 오늘도 적극적으로 사용자에게 더 좋은 모바일 기기 경험을 제공하려고 노력하고 있다.

하지만 아무리 그렇게 폭발적인 수요에 힘입어 모바일 기기가 발전하고 있더라도 그 성능엔 물리적인 한계가 있다. 게다가 네이티브 어플리케이션이 아닌 웹 브라우저 내부에서 실행되는 웹 페이지라면 그 한계는 한 단계 더 심해질 것이다. 일례로, 구매한 지 4년 정도 된 내 갤럭시 S21로 모바일 웹 브라우저에서 트위터나 지메일 같은 사이트를 접속하면 이젠 쓰기 힘들 정도로 버벅댄다. 글자 하나 타이핑하는 데 1초씩 걸리면 누가 그 서비스를 이용하고 싶어 할까. 이런 상황에서 어떻게든 모바일 사용자들을 붙잡기 위해 엔지니어들이 선택한 방법은, 모바일 웹 브라우저를 최대한 피하도록 만드는 것이었다. 네이티브 어플리케이션을 사용한다면 모바일 기기의 성능을 더 끌어올릴 수 있을 테니.

<p class="center rounded-edge-16">
  <img src="https://i.postimg.cc/VLMn6pXs/image.png" alt="딥링크"/>
</p>

딥 링크(Deeplink)란, URI를 통해 어플리케이션 내부의 구체적인 위치를 명시하는 방법을 의미한다. 예를 들어, `https://youtube.com/watch?v=w66Kzs7UIHk` 이런 링크를 모바일 기기로 들어간다고 했을 때, 사용성 나쁘고 성능적 제한도 있는 모바일 웹 브라우저에서 웹 페이지 형태로 보여주는 것이 아니라 해당 링크에 연결된 유튜브 네이티브 어플리케이션의 특정 위치로 이동하도록 만들 수 있다는 것이다. 오늘 글도 그렇고 대부분의 맥락에선 모바일 기기를 사용하는 입장에서 쓰이는 용어이긴 하지만, 원론적으론 "어플리케이션의 내부 위치를 URI와 연결"이라는 개념은 어떤 환경에서도 적용될 수 있다. 예를 들면, PC에서 Notion을 웹 브라우저로 접속했을 때도 어플리케이션으로 열기라는 버튼이 포함된 토스트 UI가 노출되는 것을 볼 수 있다.

### 딥 링크 삼국시대

어떻게 그런 게 가능하냐면 딥 링크란 어떤 특정 플랫폼에 종속되는 기술이 아니라 일종의 제안 같은 것이기 때문이다. 그래서 그 제안을 어떻게 구현할 것인가는 각 플랫폼 개발사에 달려있고, 서비스 개발자들은 그 방식에 맞춰 따라가면 된다.

#### URI Scheme

먼저 소개할 방식은 그나마 덜 플랫폼에 종속적인 방식이라고 할 수 있다. 바로 딥 링크만을 위한 URI를 만드는 것. 우선 팀 버너스리가 정의한 URI의 구조는 다음과 같다.

```plaintext
URI = scheme ":" ["//" authority] path ["?" query] ["#" fragment]
```

웹 사이트의 주소를 나타낼 땐 <strong>`scheme`</strong> 부분에 `http` 혹은 `https`가 들어간다. 하이퍼텍스트 기반 통신 프로토콜 HTTP를 사용해 해당 주소로 접속하라는 의미이다. 이처럼 스킴(Scheme)은 그 주소로 접근하기 위해 사용해야 하는 프로토콜이나 방법을 명시하기 위해 사용된다. `http`/`https`, `ftp`, `mailto`, `ssh` 등 <a href="https://ko.wikipedia.org/wiki/IANA">IANA</a>에 <a href="https://www.iana.org/assignments/uri-schemes/uri-schemes.xhtml">공식적으로 등록</a>된 스킴을 대부분 사용하는데, 그렇다고 꼭 URI에 등록된 스킴만 사용하라는 법칙은 없다. 등록된 스킴 대신 URI의 스킴 자리에 <strong>앱 스킴(App Scheme)</strong>이라는 것을 명시할 수 있다.

> `youtube://watch?v=w66Kzs7UIHk`

예를 들어 앱 스킴을 사용하면 위와 같이 유튜브 어플리케이션 내부에서 특정 영상을 재생하는 화면을 URI로 표현할 수 있다. 개념적으로는 이렇지만 그렇다고 무턱대고 저 링크를 써먹으려고 한다면 동작하지 않을 것이다. 가령 개발자 도구를 열고 `window.open('youtube://watch?v=w66Kzs7UIHk')` 이렇게 입력한다면 다음과 같은 응답이 출력되는 것을 볼 수 있다.

```javascript
window.open(`youtube://watch?v=w66Kzs7UIHk`);
// Failed to launch 'youtube://watch?v=w66Kzs7UIHk' because the scheme does not have a registered handler.
```

스킴 등록

장점? 간단함?

단점? 중복 가능. store

#### 도메인 기반 딥 링크

또또 업체별로 다른 표준

유니버설 링크
앱 링크

또또 IOS 너네가 문제지  
개발 완료 후 아무 문제 없는 줄 알았는데 QA 과정에서 발견된 문제

IOS 기기로 진입 시 URL 상관 없이 강제로 앱 랜딩  
(사내 정책이 있어서 그 설정을 바꿀 순 없는 상황)

### IOS 딥 링크 흘리기

앱 링크에선 발생하지 않는 이슈였던 것 같음(사실 그냥 QA에서 안드로이드는 멀쩡했어서 정확한 설정은 확인안해봄)
앱 스킴은 개발자가 제어 가능 (에이전트 확인 후 이동 시킬 URL을 생성해주면 되니까)

유니버설 링크는 사용자의 입력으로 인해 지정된 URL로 이동 시 발동 (ex. m.xxxx.com 하위 도메인 이동 시 강제 이동)

처음엔 진짜 패닉
  - 기획 파트에선 이거 해결 안되면 기능 배포 안된다고 하지...
  - 정책은 막혀있지...

며칠 고민 끝에 여기 저기 문의드린 결과 떠올린 아이디어. 그럼... 사용자의 이동이 아니면 되잖아?

(구체적인 해결 과정 작성)
개발자로서 우리 웹 앱에 더미 라우트 하나 파는 것은 가능했음  
URL 파라미터로 타겟 URL을 주면 자동 리다이렉트 해주는 라우트를 생성.

솔직히 될 줄 몰랐는데 되더라...

말 그대로 흘리기.

하지만 이 또한 결국 임시방편.
  - 일례로, 이러한 이슈를 보고드린 직장 동료분에게도 과거 비슷한 경험이 있어 당시 해결했던 방법을 추천받았으나 현재 시점으로 애플이 막았나봄...

결국은 정책을 잘 조정해보자. 당신이 유니버설 링크 설정을 변경할 수 있다면 말이지.

## 내가 배운 것

- IOS 기기 구매 고민 강하게 하는 중
  - 이런 이슈 때문에 야근할 바에... 테스트 기기좀 마련해두면 좋지..