---
layout: post
title: "자잘한 도움말 #19 사파리는 나의 원수"
subtitle: "Safari 브라우저를 사용하며 겪은 두 가지 오류와 해결 방안"
description: ""
date: 2024-09-06 14:00:00 +0900
category: micro

id: 19
slug: i-do-not-like-safari
tags: [💡, Front-end, Web Browser]

coverImage: "/assets/blog/coverImages/micro-19.png"

ogImage:
  url: "/assets/blog/coverImages/micro-19.png"
---

## TL;DR

<p class="center">
(2024년 9월 기준)
</p>

1. 문자열을 날짜로 파싱할 때의 오류
   - Safari 브라우저에선 다음과 같은 문자열을 `Date` 객체로 파싱하지 못한다.
    ```javascript
        new Date("2024-08-17 11:02:00 +0900"); // -> Invalid Date
    ```
    - Safari 브라우저의 날짜 파싱 알고리즘에선 날짜 표기법을 엄격하게 따진다.
    - 날짜를 표시하는 문자열을 사용할 때 <a href="https://ko.wikipedia.org/wiki/ISO_8601">ISO 8601</a> 표준을 따르도록 하자
     ```javascript
        new Date("2024-08-17T11:02:00+09:00"); // -> 👍
     ```
2. 음수 스크롤
   - Safari 브라우저에선 기본으로 웹 페이지에 탄력있는 스크롤 효과를 준다.  
     (**Elastic Overflow Scrolling** 혹은 **Rubber band** 효과)
   - 이때 `window.scrollY`의 값이 음수가 될 수도 있다.
   - `window.scrollY` 값을 기반으로 배열 인덱스를 계산하는 경우 등 특정 상황에서 오류를 야기하기도 한다.

- 이처럼 브라우저의 종류에 따라 예상하지 못한 부분에서 오류를 겪을 수 있다.
- 웹 페이지를 개발할 땐 최대한 다양한 웹 브라우저에서 테스트를 진행할 수 있도록 하자.

## 이하 그리 중요하진 않은 내용들


<p class="line-through">농담입니다 사파리 그렇게까지 싫어하는건 아니에요.</p>


<div class="sandbox-container">
<iframe src="https://codesandbox.io/embed/cmcfx9?view=preview&module=%2Fsrc%2Fscript.mjs"
     style="width:100%; height: 500px; border:0; border-radius: 4px; overflow:hidden;"
     title="hello-safari"
     allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
     sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
   ></iframe>
</div>

<p>
  <img src="https://i.postimg.cc/kgkgWmbp/elasticoverflow.webp"/>
</p>


## 내가 배운 것

- **Safari RangeError: Invalid time value**
  
    - 같은 문자열을 파싱해도 크롬은 하는데 사파리는 못해… (Node.js도 하고 파이어폭스도 한다)
    
    
    - 이와중에 Velog 조차도 사파리에서 안들어가지는 문제를 발견함
    - 이쯤되면 사파리 왜 써야 하는건지…
    - 이거 말고도 Safari에서만 발견할 수 있었던 신박한 오류를 같이 묶어서 해보자
        - 음수 스크롤;;
